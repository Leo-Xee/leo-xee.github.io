{"componentChunkName":"component---src-templates-blog-post-js","path":"/React/react-msw/","result":{"data":{"site":{"siteMetadata":{"title":"leo-xee.io","author":"Leo-Xee","siteUrl":"https://leo-xee.github.io","comment":{"disqusShortName":"","utterances":"leo-xee/blog-comments"},"sponsor":{"buyMeACoffeeId":"leoxexe"}}},"markdownRemark":{"id":"9acc2402-a668-52d1-98da-c38fd04461c6","excerpt":"프론트엔드 테스트에 대해서 공부하다가 MSW라는 유용한 라이브러리를 알게되어 이에 대한 개념과 간단하게 사용한 내용을 정리합니다. MSW란? MSW(Mock Service Worker)는 API를 모킹하는 라이브러리이다. 이는 Service Worker API를 활용해서 네트워크 레벨에서 실제 HTTP 요청을 가로챈 다음에 개발자가 미리 작성한 모의 응답(Mocking response)을 보내주는 역할을 한다.  MSW 사용의 장점 MSW…","html":"<p><img src=\"/8cb1d8c731f6ada9d4ed8649b2e7cc6a/React.gif\"></p>\n<p>프론트엔드 테스트에 대해서 공부하다가 MSW라는 유용한 라이브러리를 알게되어 이에 대한 개념과 간단하게 사용한 내용을 정리합니다.</p>\n<h1 id=\"msw란\" style=\"position:relative;\"><a href=\"#msw%EB%9E%80\" aria-label=\"msw란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSW란?</h1>\n<p><strong><a href=\"https://mswjs.io/\">MSW(Mock Service Worker)</a>는 API를 모킹하는 라이브러리이다.</strong> 이는 Service Worker API를 활용해서 네트워크 레벨에서 실제 HTTP 요청을 가로챈 다음에 개발자가 미리 작성한 모의 응답(Mocking response)을 보내주는 역할을 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVQoz6VSO07DQBRcfxPHjuPYjp3ExlBESIlFIlCKiIYIcQREi2i4ACUdRaCg5x7cgx7EYQbP2pZwcEexfrvP7828mV2xWp3i+uYWmqZDCAFV1WQ8zC/x+PaBnjeVZ6EoMj5dHONulZa1VS6KImw2G0ynRe1u94zPr28Yhlk2Vutofo6Hl3f03KjKlc2vV3Pcn2UNwDAMsd1usV6vISaTCZbLEyjFz263i36/j06nA8e2kB0kRZNoEPU9H6bVa+RUVcVsNkOSJFSiwPd9jEYjLBaLAnyJPM8Rj8cIgrDRyOUWhIZh/MlzGLnXdR2ccjAYYFyAZFkmwSljOBzKIk3TwDruLcuS531A27bLGv4MgkAyMKZpKmW7rivPpmkijuNGnj1UxliDE1Du+SHrPmM9DSObleoC2EhQqiAhI5U0AB3HkRNSMq+ekQWciP94pi18HrSGRDXBb3IJSIMJwkYycvGS6ouqPaxlep7X6iGJpId8Ipxgv4BPoS1PP9ssogJiiTbv/rN+AH2o/o1WS5GdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림1. MSW의 전체과정(이미지 참조)\"\n        title=\"그림1. MSW의 전체과정(이미지 참조)\"\n        src=\"/static/ecef85abdc1f252ec78cc0f532324642/c1b63/react-msw-01.png\"\n        srcset=\"/static/ecef85abdc1f252ec78cc0f532324642/5a46d/react-msw-01.png 300w,\n/static/ecef85abdc1f252ec78cc0f532324642/0a47e/react-msw-01.png 600w,\n/static/ecef85abdc1f252ec78cc0f532324642/c1b63/react-msw-01.png 1200w,\n/static/ecef85abdc1f252ec78cc0f532324642/21b4d/react-msw-01.png 1280w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"msw-사용의-장점\" style=\"position:relative;\"><a href=\"#msw-%EC%82%AC%EC%9A%A9%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-label=\"msw 사용의 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSW 사용의 장점</h2>\n<p>MSW 사용의 장점을 알아보기 위해서는 서비스 개발 과정의 대략적인 이해가 필요하다.</p>\n<p>먼저 서비스 개발의 이상적인 과정은 기획서를 기반으로 백엔드에서 API를 완성한 후 프론트엔드에서 완성된 API를 토대로 개발하는 것이다. 하지만 이는 현실에서 절대 불가능하다. 왜냐하면 프론드엔드 혼자 놀고 있기에는 너무나 비효율적이기 때문이다.</p>\n<p>그래서 일반적으로 프론트엔드는 프로젝트 초기에 백엔드와 합의해서 대략적인 API 명세를 합의하고 이와 부합한 목 데이터(Mock Data)를 사용해서 개발을 함께 진행한다. 하지만 개발 중에 API 명세는 빈번하게 변경되고 백엔드의 개발이 완료된 후에 프론트엔드에서는 목 데이터를 사용한 코드를 실제 API와 다시 연결해주는 추가적인 작업이 강요된다.</p>\n<p>이런 비효율적인 문제를 MSW가 해결해준다. <strong>MSW를 사용하면 개발 중에 API의 엔드포인트와 데이터 구조가 변경되더라도 프론트엔드에서 즉각적으로 대응할 수 있고 이미 실제 API의 엔드포인트와 데이터 구조를 반영해서 개발하고 있기 때문에 추가적인 작업도 불필요해진다.</strong></p>\n<h2 id=\"service-worker란\" style=\"position:relative;\"><a href=\"#service-worker%EB%9E%80\" aria-label=\"service worker란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Service Worker란?</h2>\n<p><strong><a href=\"https://developers.google.com/web/fundamentals/primers/service-workers?hl=ko\">Service Worker</a>는 브라우저의 메인 쓰레드와 분리된 쓰레드인 백그라운드에서 자바스크립트를 실행할 수 있는 기술 중 하나이다.</strong> MSW는 이 기술을 기반으로 동작하기 때문에 애플리케이션의 동작을 방해하지 않고 별도로 네트워크 요청을 감시하고 있다가 요청이 발생하면 이를 가로채서 미리 작성된 모의 응답을 제공해준다.</p>\n<h1 id=\"msw-사용\" style=\"position:relative;\"><a href=\"#msw-%EC%82%AC%EC%9A%A9\" aria-label=\"msw 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSW 사용</h1>\n<p><strong>이제 MSW를 사용한 간단한 여행지 애플리케이션 예제를 통해서 이해해보도록 하자.</strong> 참고로 이 예제는 CRA의 Typescript 템플릿을 사용했다.</p>\n<p>먼저 MSW 패키지를 사용하기 위해서 개발 의존성으로 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D msw</code></pre></div>\n<p>패키지 설치를 완료했다면 <code class=\"language-text\">src/mocks</code> 디렉토리 안에 <code class=\"language-text\">handler.ts</code> 파일에 다음과 같은 내용을 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* /src/mocks/handler.ts */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> rest <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Product</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  imagePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> handlers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  rest<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:3000/products'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> ctx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">res</span><span class=\"token punctuation\">(</span>\n      ctx<span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      ctx<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      ctx<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> <span class=\"token string\">'New York'</span><span class=\"token punctuation\">,</span>\n          imagePath<span class=\"token operator\">:</span>\n            <span class=\"token string\">'https://images.unsplash.com/photo-1499092346589-b9b6be3e94b2?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> <span class=\"token string\">'London'</span><span class=\"token punctuation\">,</span>\n          imagePath<span class=\"token operator\">:</span>\n            <span class=\"token string\">'https://images.unsplash.com/photo-1543832923-44667a44c804?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1344&amp;q=80'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span>\n          imagePath<span class=\"token operator\">:</span>\n            <span class=\"token string\">'https://images.unsplash.com/photo-1601621915196-2621bfb0cd6e?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1172&amp;q=80'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> <span class=\"token string\">'Japan'</span><span class=\"token punctuation\">,</span>\n          imagePath<span class=\"token operator\">:</span>\n            <span class=\"token string\">'https://images.unsplash.com/photo-1526481280693-3bfa7568e0f3?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          name<span class=\"token operator\">:</span> <span class=\"token string\">'France'</span><span class=\"token punctuation\">,</span>\n          imagePath<span class=\"token operator\">:</span>\n            <span class=\"token string\">'https://images.unsplash.com/photo-1431274172761-fca41d930114?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>이 파일은 HTTP 요청을 가로채서 제공할 모의 응답을 핸들링하는 역할을 한다. 여기서는 클라이언트에서 <code class=\"language-text\">/products</code> 로 <code class=\"language-text\">GET</code> 요청을 보내면 이를 가로채서 1초의 딜레이 후에 응답코드 200번으로 다음과 같은 JSON 데이터로 응답한다.</li>\n</ul>\n<br/>\n<p>그 다음에 <code class=\"language-text\">ProductList.tsx</code> 라는 파일을 생성하고 <code class=\"language-text\">/products</code> 엔드포인트에서 <code class=\"language-text\">GET</code> 요청으로 데이터를 받아와서 리스트 형태로 뿌려주는 코드를 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">/* /src/components/ProductList.tsx */</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span>\n\n<span class=\"token keyword\">import</span> ErrorBanner <span class=\"token keyword\">from</span> <span class=\"token string\">'./ErrorBanner'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Product <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../mocks/handlers'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ProductList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">,</span> setItems<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Product<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>loading<span class=\"token punctuation\">,</span> setLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">loadItems</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">loadItems</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">get</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Product<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://localhost:3000/products</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">setItems</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loading<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">로딩 중입니다.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorBanner</span></span> <span class=\"token attr-name\">msg</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>에러가 발생했습니다.<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>idx<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>imagePath<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> product</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ProductList</code></pre></div>\n<p>이렇게 MSW의 <code class=\"language-text\">handler.ts</code>와 <code class=\"language-text\">ProductList.tsx</code> 파일을 모두 작성한 다음 <strong>애플리케이션을 실행시켜보면 제대로 동작하지 않을 것이다.</strong>\n그 이유는 아직 브라우저와 MSW를 통합하는 세팅을 하지 않았기 때문이다. 이제 통합해보도록 하자!!</p>\n<h1 id=\"통합\" style=\"position:relative;\"><a href=\"#%ED%86%B5%ED%95%A9\" aria-label=\"통합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>통합</h1>\n<h2 id=\"브라우저와-통합\" style=\"position:relative;\"><a href=\"#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%99%80-%ED%86%B5%ED%95%A9\" aria-label=\"브라우저와 통합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>브라우저와 통합</h2>\n<h3 id=\"service-worker-생성\" style=\"position:relative;\"><a href=\"#service-worker-%EC%83%9D%EC%84%B1\" aria-label=\"service worker 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Service Worker 생성</h3>\n<p>MSW는 브라우저와 쉽게 통합할 수 있도록 명령어를 제공한다. React 프로젝트의 <code class=\"language-text\">public</code> 디렉토리 위치를 지정해서 다음 명령어를 실행하면 <code class=\"language-text\">public</code> 디렉토리 내부에 <code class=\"language-text\">mockServiceWorker.js</code> 가 생성될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx msw init <span class=\"token operator\">&lt;</span> PUBLIC_DIR <span class=\"token operator\">></span> --save</code></pre></div>\n<h3 id=\"브라우저에-등록\" style=\"position:relative;\"><a href=\"#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90-%EB%93%B1%EB%A1%9D\" aria-label=\"브라우저에 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>브라우저에 등록</h3>\n<p><code class=\"language-text\">src/mocks</code> 디렉토리 내부에 <code class=\"language-text\">browser.ts</code> 파일을 생성하고 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* /src/mocks/browser.ts */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setupWorker<span class=\"token punctuation\">,</span> SetupWorkerApi <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> handlers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./handlers'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> worker<span class=\"token operator\">:</span> SetupWorkerApi <span class=\"token operator\">=</span> <span class=\"token function\">setupWorker</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>handlers<span class=\"token punctuation\">)</span></code></pre></div>\n<p>그 다음에 <code class=\"language-text\">src/index.tsx</code> 파일에 개발 모드일 때 MSW가 실행되도록 다음과 같이 코드를 추가해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">/* /src/index.tsx */</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App'</span>\n\n<span class=\"token comment\">// MSW 실행을 위한 코드 추가</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> worker <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./mocks/browser'</span><span class=\"token punctuation\">)</span>\n  worker<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"동작-확인\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%ED%99%95%EC%9D%B8\" aria-label=\"동작 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 확인</h3>\n<p>이제 브라우저와의 모든 통합이 완료되었으므로 애플리케이션을 다시 실행해보면 <code class=\"language-text\">handler.ts</code>에 작성했던 로직에 따라 1초의 딜레이 이후에 여행지리스트가 정상적으로 렌더링되는 것을 확인할 수 있다. 또한 콘솔창을 열어보면 MSW의 모킹 중이라는 강조된 로그와 함께 실제 요청과 모의 응답의 데이터를 모두 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQoz3WS60uTYRjG3z8iQz+Em9Nt73x3cof6KyLyU7AKNw+FZq0NhEmFIR3cPsRQKCObpsjM8lPBKKeoQ1ta2dropFkIYRL0IbTptl/vuyiS8oaL64Ybfs91P88jsEtl0im2s5v/nXm9PgyikWqDhChLMlowWx1YrHaEpS/fSK+us7CyRlLW6tpXppIZJp+8IrH4no+rn0nEJ1lKJXnzfI6n8285faoVSTRgsdnRmUxodAZMVhtWmxMhGpvA19lFx7VugndGGX8cw193iKteN6Hmo4zfH6ax6RjnzrgItLhp9bZw4mQzGr1RhlmpkszolZSK6yWEvqFBXPV1tPlbuHyxnal4jCvtZ7ngb8XXcJyRoX4GIv0MXg8zfCvC2N0R3J4G9NVWjI4DSOYaRJsD0bkfnZxSUO4kVyjwfWODfAG2traRjc0f2aLn8jkK8jyb3SpKKQWorhIx2Z1ISkqTBW2NvehCT+8AgVCEh6kN7s0sM5tZpzP6gdDYJzqHMiTS60WIAs3n88W+vqEJjcGOWG1GVVGJWl0pexUq2YXA+TYOuo7QEeyi9nAtD+KzhKMJekbn5INGmH62VIQosN9AT30jpWX70MqPoUDK1RpUKs0v4PTMI8Ldl7hxM8jtvl5eZxZ5uRDnxfwMiYkYK8vv/knokVfeU1KKWk5VrqT7S8Ju/zCXK/zpFdhOYCMle8uo0Gh3wBT9BNzk7+YD6XD+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림2. 브라우저와 MSW 통합\"\n        title=\"그림2. 브라우저와 MSW 통합\"\n        src=\"/static/4febc448cb2f9eaff4f2aca0711dd286/c1b63/react-msw-02.png\"\n        srcset=\"/static/4febc448cb2f9eaff4f2aca0711dd286/5a46d/react-msw-02.png 300w,\n/static/4febc448cb2f9eaff4f2aca0711dd286/0a47e/react-msw-02.png 600w,\n/static/4febc448cb2f9eaff4f2aca0711dd286/c1b63/react-msw-02.png 1200w,\n/static/4febc448cb2f9eaff4f2aca0711dd286/21b4d/react-msw-02.png 1280w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"node와-통합\" style=\"position:relative;\"><a href=\"#node%EC%99%80-%ED%86%B5%ED%95%A9\" aria-label=\"node와 통합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Node와 통합</h2>\n<p>MSW를 사용한 애플리케이션을 브라우저에서만 확인하기 위해서는 브라우저와의 통합만 해도 충분하다. 하지만 <code class=\"language-text\">jest</code>와 <code class=\"language-text\">@testing-library</code> 를 사용한 프론트엔드 테스트에도 적용하기 위해서는 MSW를 Node와도 통합해줘야한다.</p>\n<h3 id=\"서버-생성\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%83%9D%EC%84%B1\" aria-label=\"서버 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 생성</h3>\n<p><code class=\"language-text\">/src/mocks</code> 디렉토리 내부에 <code class=\"language-text\">server.ts</code> 파일을 생성하고 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* /src/mocks/server.ts */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setupServer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'msw/node'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> handlers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./handlers'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token function\">setupServer</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>handlers<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"api-mocking-설정\" style=\"position:relative;\"><a href=\"#api-mocking-%EC%84%A4%EC%A0%95\" aria-label=\"api mocking 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Mocking 설정</h3>\n<p>각 테스트 케이스마다 API 모킹을 따로 해줘야 서로 영향을 주지 않기 때문에 정상적인 테스트를 위해 <code class=\"language-text\">src/setupTests.ts</code> 파일에 다음과 같이 코드를 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* /src/setupTests.ts  */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'@testing-library/jest-dom'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> server <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../src/mocks/server'</span>\n\n<span class=\"token comment\">// 테스트 시작 전 서버 대기 시작</span>\n<span class=\"token function\">beforeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 다른 테스트에 영향이 가지 않도록 매번 핸들러 리셋</span>\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> server<span class=\"token punctuation\">.</span><span class=\"token function\">resetHandlers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 테스트 종료 후에 서버 클린업</span>\n<span class=\"token function\">afterAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> server<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"동작-확인-1\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%ED%99%95%EC%9D%B8-1\" aria-label=\"동작 확인 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 확인</h1>\n<p>이제 Node와의 통합도 완료되었다. 이제 작성한 테스트 코드에서도 MSW를 통해서 응답 받은 데이터를 다음과 같이 사용할 수 있다. (참고로 <code class=\"language-text\">handler.ts</code>에서 작성한 <code class=\"language-text\">delay</code> 코드를 제거해야 아레의 테스트 케이스가 통과한다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">/* src/components/ProductList.test.tsx */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> screen <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@testing-library/react'</span>\n<span class=\"token keyword\">import</span> ProductList <span class=\"token keyword\">from</span> <span class=\"token string\">'./ProductList'</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'여행지목록 데이터를 불러와서 렌더링한다'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ProductList</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> SeoulImage <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> screen<span class=\"token punctuation\">.</span><span class=\"token function\">findByRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Seoul'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>SeoulImage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeInTheDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACG0lEQVQ4y52SyW7aUBRAySLLql/RTAwhOGEolDHgEdvP48MghbRZZFOpq6q/kI8IjpoPzMKrBOHb+56HUqJUVS0d3WfBPb7DKxTwEdutu7HRg6Jw8VQ5rUenZ42oUq1HzVY/qje7kXDRiRqtHkc4b0cnpVpULAlRsSyw81O11oRSRbgrZM+nqfRAf9yC7tCY0msIgi/g0yV4/hVMDR9k1eaIMgFJsWAimTlj0YjVqQcf28OHXNjrTlaecwWWPX+RdSdWqBurxI2JFcSKZsco4aCQg6IcFL5wYWe4yoWyaoZfv30H21msNeLB7PYGNMsDk8xAVAiMxlO4nOg5KNlmnQrDXDi6VMJgcYNtWfijC5Y1562xFnWTgkEob52h6V7WahZfC7v9SejhzIgdrIk9B1mzeTKxPbDdJJpYsUFc/pFkfn8RDoZSSIPPYGHLrEJWXbIIVmWSKMr5EvLq3hT2BmLoz67Bny3Xmu4CLgJUzcHopFslmGjubvdtYas9CE2cm2FSJox100+hMc6MbxorxujwmG4347Ww0eqv2Oxsd/GMkg2KNzjDjc5Izxk4ww1KNijlEXlmY/rj2kiK8eh4ySU2rQDYF9mZ/ZFtlcXscjMk5TfJTZhBuzN6zIXVs3O/VK79/HBQvD84LK0Oj8rhLkfH21QyVvh+f1KsYu6xz2XBfLmHYR95h7z/T1ju/mAk73EpAHC2z//Kbv4vb3Kwdm45Ci8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림3. Node와 MSW 통합\"\n        title=\"그림3. Node와 MSW 통합\"\n        src=\"/static/96de7b9075390fa9abfaf5d9010797aa/c1b63/react-msw-03.png\"\n        srcset=\"/static/96de7b9075390fa9abfaf5d9010797aa/5a46d/react-msw-03.png 300w,\n/static/96de7b9075390fa9abfaf5d9010797aa/0a47e/react-msw-03.png 600w,\n/static/96de7b9075390fa9abfaf5d9010797aa/c1b63/react-msw-03.png 1200w,\n/static/96de7b9075390fa9abfaf5d9010797aa/21b4d/react-msw-03.png 1280w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"참조\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"참조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참조</h1>\n<ul>\n<li><a href=\"https://mswjs.io/docs/\">https://mswjs.io/docs/</a></li>\n<li><a href=\"https://tech.kakao.com/2021/09/29/mocking-fe/\">https://tech.kakao.com/2021/09/29/mocking-fe/</a></li>\n<li><a href=\"https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c\">https://blog.mathpresso.com/msw로-api-모킹하기-2d8a803c3d5c</a></li>\n<li><a href=\"https://blog.mathpresso.com/%EB%AA%A8%EB%8D%98-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A0%84%EB%9E%B5-1%ED%8E%B8-841e87a613b2\">https://blog.mathpresso.com/모던-프론트엔드-테스트-전략-1편-841e87a613b2</a></li>\n</ul>\n<br/>","frontmatter":{"title":"MSW로 모킹하기","date":"March 18, 2022"}}},"pageContext":{"slug":"/React/react-msw/","previous":{"fields":{"slug":"/CS/rest-api/"},"frontmatter":{"title":"REST API"}},"next":{"fields":{"slug":"/Error/eslint-parseroption/"},"frontmatter":{"title":"Error: \"parserOptions.project\" has been set for @typescript-eslint/parser"}}}}}