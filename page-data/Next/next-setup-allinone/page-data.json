{"componentChunkName":"component---src-templates-blog-post-js","path":"/Next/next-setup-allinone/","result":{"data":{"site":{"siteMetadata":{"title":"leo-xee.io","author":"Leo-Xee","siteUrl":"https://leo-xee.github.io","comment":{"disqusShortName":"","utterances":"leo-xee/blog-comments"},"sponsor":{"buyMeACoffeeId":"leoxexe"}}},"markdownRemark":{"id":"a95f781f-d013-504d-b787-ac4ffea572bb","excerpt":"이 글에서 next-create-app을 이용하지않고 Typescript, Jest, Testing-Library, ESLint(Airbnb), Prettier를 사용해서 직접 Next.js(12+) 환경을 구축하는 과정을 정리합니다. 전체 코드는 여기에서 확인할 수 있습니다. Next.js 먼저 Next.js를 사용하기 위한 필수 패키지들을 설치한다.  에 scripts를 다음과 같이 작성한다. Next.js…","html":"<p><img src=\"/81aefd7d1672183644b6579d60eee69e/Next.gif\"></p>\n<p>이 글에서 next-create-app을 이용하지않고 Typescript, Jest, Testing-Library, ESLint(Airbnb), Prettier를 사용해서 직접 Next.js(12+) 환경을 구축하는 과정을 정리합니다. 전체 코드는 <a href=\"https://github.com/Leo-Xee/next-starter-pack\">여기</a>에서 확인할 수 있습니다.</p>\n<h1 id=\"nextjs\" style=\"position:relative;\"><a href=\"#nextjs\" aria-label=\"nextjs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js</h1>\n<p>먼저 Next.js를 사용하기 위한 필수 패키지들을 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> next react react-dom</code></pre></div>\n<p><code class=\"language-text\">package.json</code> 에 scripts를 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">/* package.json */</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next lint\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next.js의 필수 디렉토리인 <code class=\"language-text\">pages</code>와 <code class=\"language-text\">public</code> 을 생성한 다음에 나는 프로젝트의 주요 파일을 <code class=\"language-text\">src</code> 디렉토리 안에서 관리할 것이기 때문에 다음과 같이 <code class=\"language-text\">pages</code> 디렉토리를 이동시킨다. 참고로 <code class=\"language-text\">public</code> 디렉토리는 프로젝트의 루트에 위치해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\n├── src\n│   └── pages\n├── public\n├── node_modules\n├── yarn.lock\n└── package.json</code></pre></div>\n<ul>\n<li><code class=\"language-text\">pages</code> : 파일기반 라우팅 시스템을 위한 디렉토리</li>\n<li><code class=\"language-text\">public</code> : 이미지와 폰트와 같은 정적 리소스를 위한 디렉토리</li>\n</ul>\n<p>위에서 생성한 <code class=\"language-text\">pages</code> 디렉토리 안에 <code class=\"language-text\">index.js</code> 를 생성하고 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">/* index.jsx */</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HomePage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome to Next.js!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HomePage</code></pre></div>\n<p>여기까지 완료하고 <code class=\"language-text\">yarn dev</code> 명령어를 실행하면 Next.js 프로젝트가 정상적으로 동작하는 것을 확인할 수 있다. 참고로 Next.js는 Webpack과 Babel등의 기본적인 설정들을 제공해주기 때문에 따로 설정할 필요가 없다.</p>\n<h1 id=\"typescript\" style=\"position:relative;\"><a href=\"#typescript\" aria-label=\"typescript permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TypeScript</h1>\n<p>Next.js에 Typescript를 적용하기 위해서 다음 명령어로 <code class=\"language-text\">tsconfig.json</code> 파일을 생성하고 프로젝트를 실행시켜본다. 참고로 설정 파일의 내용이 없으면 프로젝트 실행 시에 Next.js에서 설정 기본값을 자동으로 세팅해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 파일 생성</span>\n$ <span class=\"token function\">touch</span> tsconfig.json\n\n<span class=\"token comment\"># 프로젝트 실행</span>\n$ <span class=\"token function\">yarn</span> dev</code></pre></div>\n<p>명령어를 실행하면 다음 그림과 같이 typescript 관련 패키지들을 설치하라는 메시지를 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5UlEQVQozz2O61baUBCF8ySttlSXECARCLknEKigIffECFIuAQJVbOv7r7U7HGl/fGvv2TNn5nDdXgZruIB5pmPmuJSH4BUXXxoOPtV6+Mz3cMH3Sfv/lUG9i3oflzT3D67RD1A3PYhGhKZOXvHASxPwskfex60RQ9BC1ChrqAHLBD1Ek7KWlaBK+VfhDhVxxOA62gSW7sExQgysGC16JGkBDDrQJq/SQotymTKFFkm0SKZMN2MopF2a6dKRE7rqg5OsDDKh2Sk6NFDTEyJGVY1QN1LUtBg35KukdTMFz/rJuc6Y/9YNcCWHuCY48fsczeEz2m6BFqF4G8iENNlAj/ZQgh3zEvWM+AAtOkCl/Ha0gDReQBjMUFEiVNSYwV3TlRv7EY3xEsLDmmnzfgWRlginI/4OordlPcHdoBWUrK4N57iyc0bVmaJOi3mC09MD7PwFfcJM9nCmr7CznzCSEsPZEaP5b1Y70+NZX+HQrE219eMdPaIdlZD8Ah2vAKdMFtDCAr2nFxhpCS3eMdWTD8xsT4MrdCZLtImTl4MCXVKJatlfo3U/R+NuBnH8DM6lx+PHEv7yiHD1hoA0L9+RbX4hXb8h3/2BO9vDfd5jlG8xzDYYT+nN0+6jTgvo9CnlYYFBssVfXGFJ3LKUiwEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림1. typescript 관련 패키지 메시지\"\n        title=\"그림1. typescript 관련 패키지 메시지\"\n        src=\"/static/2233809b148d7d96a916ece0f7573c97/c1b63/next-setup-allinone-01.png\"\n        srcset=\"/static/2233809b148d7d96a916ece0f7573c97/5a46d/next-setup-allinone-01.png 300w,\n/static/2233809b148d7d96a916ece0f7573c97/0a47e/next-setup-allinone-01.png 600w,\n/static/2233809b148d7d96a916ece0f7573c97/c1b63/next-setup-allinone-01.png 1200w,\n/static/2233809b148d7d96a916ece0f7573c97/bb072/next-setup-allinone-01.png 1318w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위의 메시지와 같이 다음 명령어로 관련 패키지들을 설치하고 다시 프로젝트를 실행시켜보면 정상적으로 동작함과 동시에 <code class=\"language-text\">tsconfig.json</code> 파일의 내용이 자동으로 세팅된 것을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D typescript @types/react @types/node\n\n$ <span class=\"token function\">yarn</span> dev</code></pre></div>\n<p>Next.js에서 기본적으로 세팅해준 <code class=\"language-text\">tsconfig.json</code>에 내가 사용하는 옵션을 추가한 파일의 내용은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">/* tsconifg.json */</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dom.iterable\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"skipLibCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"strict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"forceConsistentCasingInFileNames\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"noEmit\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"incremental\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"resolveJsonModule\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"isolatedModules\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"preserve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"noImplicitAny\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"strictNullChecks\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"allowSyntheticDefaultImports\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"noFallthroughCasesInSwitch\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sourceMap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"@/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/*\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"next-env.d.ts\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"**/*.ts\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"**/*.tsx\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">src</code> 디렉토리 내부의 <code class=\"language-text\">index.jsx</code> 의 파일명을 <code class=\"language-text\">index.tsx</code> 으로 변경해주면 Typescript 세팅이 완료된 것이다.</p>\n<h1 id=\"jest-testing-library\" style=\"position:relative;\"><a href=\"#jest-testing-library\" aria-label=\"jest testing library permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jest, Testing-library</h1>\n<p>이제 Next.js에 테스트 환경을 세팅하기 위해서 관련 패키지들을 설치한다. 관련 패키지들의 내용이 궁금하다면 <a href=\"https://leo-xee.github.io/React/react-setup-jest/\">여기</a>를 확인해도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D jest @testing-library/react @testing-library/jest-dom @testing-library/user-event jest-environment-jsdom</code></pre></div>\n<p>프로젝트의 루트 위치에 <code class=\"language-text\">setupTests.ts</code> 파일을 생성하고 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">/* jest.setup.js */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'@testing-library/jest-dom/extend-expect'</span></code></pre></div>\n<p>Next.js 12부터는 Jest의 기본적인 설정을 제공하기 때문에 프로젝트의 루트 위치에 <code class=\"language-text\">jest.config.js</code> 파일을 생성하고 다음과 같이 간략하게 설정을 완료할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">/* jest.config.js */</span>\n\n<span class=\"token keyword\">const</span> nextJest <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next/jest'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> createJestConfig <span class=\"token operator\">=</span> <span class=\"token function\">nextJest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  dir<span class=\"token operator\">:</span> <span class=\"token string\">'./'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> customJestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  setupFilesAfterEnv<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'&lt;rootDir>/jest.setup.js'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 각각의 테스트 전에 실행할 모듈을 경로</span>\n  moduleDirectories<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;rootDir>/'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  testEnvironment<span class=\"token operator\">:</span> <span class=\"token string\">'jest-environment-jsdom'</span><span class=\"token punctuation\">,</span>\n  moduleNameMapper<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'^@/(.*)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;rootDir>/src/$1'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tsconfig에서 절대경로 사용 시에 jest가 인식하도록 경로 매핑</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">createJestConfig</span><span class=\"token punctuation\">(</span>customJestConfig<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">package.json</code>의 scripts에 다음과 같은 명령어를 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">/* package.json */</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next lint\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest --watchAll\"</span> <span class=\"token comment\">// 추가</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>테스트가 잘 동작하는지 확인하기 위해서 <code class=\"language-text\">pages</code> 디렉토리 내부에 <code class=\"language-text\">index.test.tsx</code> 파일을 생성하고 다음과 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">/* index.test.tsx */</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> screen <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@testing-library/react'</span>\n<span class=\"token keyword\">import</span> HomePage <span class=\"token keyword\">from</span> <span class=\"token string\">'./index'</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Welcome message를 보여준다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HomePage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> screen<span class=\"token punctuation\">.</span><span class=\"token function\">getByRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">'heading'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'Welcome to Next.js!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBeInTheDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>그 다음 <code class=\"language-text\">yarn test</code> 명령어을 실행하면 정상적으로 동작하는 것을 확인할 수 있다. Next.js 12부터는 테스트에 Rust 컴파일러를 사용하기 때문에 속도가 크게 개선되었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5UlEQVQozz2O61baUBCF8ySttlSXECARCLknEKigIffECFIuAQJVbOv7r7U7HGl/fGvv2TNn5nDdXgZruIB5pmPmuJSH4BUXXxoOPtV6+Mz3cMH3Sfv/lUG9i3oflzT3D67RD1A3PYhGhKZOXvHASxPwskfex60RQ9BC1ChrqAHLBD1Ek7KWlaBK+VfhDhVxxOA62gSW7sExQgysGC16JGkBDDrQJq/SQotymTKFFkm0SKZMN2MopF2a6dKRE7rqg5OsDDKh2Sk6NFDTEyJGVY1QN1LUtBg35KukdTMFz/rJuc6Y/9YNcCWHuCY48fsczeEz2m6BFqF4G8iENNlAj/ZQgh3zEvWM+AAtOkCl/Ha0gDReQBjMUFEiVNSYwV3TlRv7EY3xEsLDmmnzfgWRlginI/4OordlPcHdoBWUrK4N57iyc0bVmaJOi3mC09MD7PwFfcJM9nCmr7CznzCSEsPZEaP5b1Y70+NZX+HQrE219eMdPaIdlZD8Ah2vAKdMFtDCAr2nFxhpCS3eMdWTD8xsT4MrdCZLtImTl4MCXVKJatlfo3U/R+NuBnH8DM6lx+PHEv7yiHD1hoA0L9+RbX4hXb8h3/2BO9vDfd5jlG8xzDYYT+nN0+6jTgvo9CnlYYFBssVfXGFJ3LKUiwEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림2. 테스트 동작 확인\"\n        title=\"그림2. 테스트 동작 확인\"\n        src=\"/static/2233809b148d7d96a916ece0f7573c97/c1b63/next-setup-allinone-01.png\"\n        srcset=\"/static/2233809b148d7d96a916ece0f7573c97/5a46d/next-setup-allinone-01.png 300w,\n/static/2233809b148d7d96a916ece0f7573c97/0a47e/next-setup-allinone-01.png 600w,\n/static/2233809b148d7d96a916ece0f7573c97/c1b63/next-setup-allinone-01.png 1200w,\n/static/2233809b148d7d96a916ece0f7573c97/bb072/next-setup-allinone-01.png 1318w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"eslintairbnb-prettier\" style=\"position:relative;\"><a href=\"#eslintairbnb-prettier\" aria-label=\"eslintairbnb prettier permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ESLint(Airbnb), Prettier</h1>\n<p>Next.js에서 제공하는 <code class=\"language-text\">lint</code> 명령어를 사용해서 기본적으로 필요한 ESLint 규칙들을 지정할 수 있다. 하지만 Airbnb 규칙을 사용하는 것을 선호하기 때문에 프로젝트에 airbnb와 next의 규칙을 직접 설치하고 세팅할 것이다.</p>\n<p>ESLint와 Prettier 관련 패키지들을 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># eslint와 prettier</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D eslint prettier\n\n<span class=\"token comment\"># eslint의 formatter을 off하고 prettier를 사용하기 위한 패키지들</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D eslint-config-prettier eslint-plugin-prettier\n\n<span class=\"token comment\"># typescript를 lint하기 위한 패키지들</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @typescript-eslint/eslint-plugin @typescript-eslint/parser\n\n<span class=\"token comment\"># next 규칙 플러그인</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @next/eslint-plugin-next\n\n<span class=\"token comment\"># airbnb 규칙</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D eslint-config-airbnb\n\n<span class=\"token comment\"># airbnb 규칙의 의존성 패키지들</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react eslint-plugin-react-hooks\n\n<span class=\"token comment\"># airbnb 타입스크립트 규칙</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D eslint-config-airbnb-typescript\n\n<span class=\"token comment\"># jest를 규칙 플러그인</span>\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D eslint-plugin-jest</code></pre></div>\n<p>프로젝트의 루트 위치에 <code class=\"language-text\">.eslinitrc.json</code> 파일을 생성하고 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">/* .eslintrc.json */</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"root\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"browser\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es6\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"parser\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@typescript-eslint/parser\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"parserOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"ecmaFeatures\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ecmaVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"latest\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sourceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"module\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"project\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./tsconfig.json\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ignorePatterns\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"jest.*.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"airbnb\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"airbnb-typescript\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"airbnb/hooks\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:@typescript-eslint/recommended\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:@typescript-eslint/recommended-requiring-type-checking\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:@next/next/recommended\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:prettier/recommended\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:jest/recommended\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"prettier\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"@typescript-eslint\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"jest\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"import\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"prettier/prettier\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"endOfLine\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"import/extensions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"tsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"never\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ts\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"never\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"never\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"never\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react/react-in-jsx-scope\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react/jsx-props-no-spreading\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>프로젝트의 루트 위치에 <code class=\"language-text\">.prettierrc.json</code> 파일을 생성하고 다음과 같이 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">/* .prettierrc.json */</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"singleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"arrowParens\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"always\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"semi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"useTabs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"tabWidth\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"printWidth\"</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"trailingComma\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h1>\n<ul>\n<li><a href=\"https://nextjs.org/docs/getting-started\">https://nextjs.org/docs/getting-started</a></li>\n</ul>","frontmatter":{"title":"밑바닥부터 Next.js 개발 환경 구축하기 - All in One","date":"April 26, 2022"}}},"pageContext":{"slug":"/Next/next-setup-allinone/","previous":{"fields":{"slug":"/JavaScript/eventloop/"},"frontmatter":{"title":"[JS] 이벤트 루프"}},"next":{"fields":{"slug":"/React/react-swr/"},"frontmatter":{"title":"SWR"}}}}}